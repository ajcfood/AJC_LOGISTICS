USE [MGXMLProcessing]
GO
/****** Object:  StoredProcedure [dbo].[sp-MGXML-TruncateRouteStgTbls]    Script Date: 5/21/2019 2:44:00 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


ALTER PROCEDURE [dbo].[sp-MGXML-TruncateRouteStgTbls]

AS
BEGIN TRY
BEGIN

SET NOCOUNT ON;

/*
05/17/2019 - SA - Added Error Logging

*/

truncate table tblRouteXML_Ref;
truncate table tblRouteXML_CarrierDetails;
truncate table tblRouteXML_PriceSheet;
truncate table tblRouteXML_Dates;
truncate table tblRouteXML_Charges;
--truncate table tblRouteXML_Enterprise;
truncate table tblRouteXML_Item;
truncate table tblRouteXML_Locations;

END
End Try



BEGIN CATCH


              DECLARE @ErrorMessage NVARCHAR(4000), @ErrorLine INT, @ErrorDate DATETIME;

              
              SELECT @ErrorMessage = ERROR_MESSAGE(), @ErrorLine = ERROR_LINE(), @ErrorDate = GETDATE();
              
              Insert into AJCDW.dbo.tblProcedureErrorLog ([ProcedureName], [ErrorMessage], [ErrorLine], [ErrorDate])
              Select '[sp-MGXML-TruncateRouteStgTbls]', @ErrorMessage, @ErrorLine, @ErrorDate



END CATCH
